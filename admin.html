<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Admin - R√°dio Supermercado do Louro</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <div class="admin-container">
        
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-logo">
                <div class="admin-logo-icon">üõí</div>
                <h1>Admin Panel</h1>
                <p>R√°dio Supermercado do Louro</p>
            </div>
            
            <nav class="admin-nav">
                <a class="nav-item active" data-section="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a class="nav-item" data-section="upload">
                    <span class="nav-icon">üì§</span>
                    <span>Upload</span>
                </a>
                <a class="nav-item" data-section="files">
                    <span class="nav-icon">üìÅ</span>
                    <span>Arquivos</span>
                </a>
                <a class="nav-item" data-section="stats">
                    <span class="nav-icon">üìà</span>
                    <span>Estat√≠sticas</span>
                </a>
                <a class="nav-item" data-section="schedule">
                    <span class="nav-icon">üìÖ</span>
                    <span>Programa√ß√£o</span>
                </a>
                <a class="nav-item" data-section="config">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Configura√ß√µes</span>
                </a>
            </nav>
            
            <div class="radio-status">
                <h3>Status da R√°dio</h3>
                <div class="status-indicator">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="statusText">Carregando...</span>
                </div>
                <button class="btn-admin btn-secondary-admin" id="toggleTransmission" style="width: 100%;">
                    <span id="toggleBtnText">Iniciar</span>
                </button>
            </div>
            
            <div style="margin-top: auto; padding-top: var(--espaco-xl);">
                <a href="index.html" class="btn-admin btn-secondary-admin" style="width: 100%; justify-content: center;">
                    ‚Üê Voltar ao Player
                </a>
            </div>
        </aside>
        
        <!-- Conte√∫do Principal -->
        <main class="admin-content">
            
            <!-- SE√á√ÉO: DASHBOARD -->
            <section id="dashboard-section" class="content-section active">
                <div class="content-header">
                    <h2 class="content-title">Dashboard</h2>
                    <div class="content-actions">
                        <button class="btn-admin btn-primary-admin" id="refreshStats">
                            üîÑ Atualizar
                        </button>
                    </div>
                </div>
                
                <!-- Cards de Estat√≠sticas -->
                <div class="cards-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="totalMusicas">0</div>
                                <div class="stat-label">Total de M√∫sicas</div>
                            </div>
                            <div class="stat-icon">üéµ</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="totalVinhetas">0</div>
                                <div class="stat-label">Vinhetas</div>
                            </div>
                            <div class="stat-icon">üìª</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="totalAvisos">0</div>
                                <div class="stat-label">Avisos</div>
                            </div>
                            <div class="stat-icon">üì¢</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="totalReproducoes">0</div>
                                <div class="stat-label">Reprodu√ß√µes Total</div>
                            </div>
                            <div class="stat-icon">‚ñ∂Ô∏è</div>
                        </div>
                    </div>
                </div>
                
                <!-- Tocando Agora -->
                <div class="upload-section">
                    <h3 class="section-title">üéµ Tocando Agora</h3>
                    <div id="nowPlayingInfo">
                        <p>Aguardando informa√ß√µes...</p>
                    </div>
                </div>
            </section>
            
            <!-- SE√á√ÉO: UPLOAD -->
            <section id="upload-section" class="content-section">
                <div class="content-header">
                    <h2 class="content-title">Upload de Arquivos</h2>
                </div>
                
                <div class="upload-section">
                    <div class="upload-grid">
                        
                        <!-- Upload M√∫sicas -->
                        <div class="upload-card">
                            <div class="upload-card-icon">üéµ</div>
                            <h4 class="upload-card-title">M√∫sicas</h4>
                            
                            <div class="metadata-inputs">
                                <div class="input-group">
                                    <label class="input-label">Categoria</label>
                                    <select class="select-input" id="musicCategoria">
                                        <option value="geral">Geral</option>
                                        <option value="natal">Natal</option>
                                        <option value="pascoa">P√°scoa</option>
                                        <option value="saojoao">S√£o Jo√£o</option>
                                        <option value="carnaval">Carnaval</option>
                                    </select>
                                </div>
                                
                                <div class="input-group">
                                    <label class="input-label">G√™nero</label>
                                    <select class="select-input" id="musicGenero">
                                        <option value="pop">Pop</option>
                                        <option value="rock">Rock</option>
                                        <option value="mpb">MPB</option>
                                        <option value="sertanejo">Sertanejo</option>
                                        <option value="forro">Forr√≥</option>
                                        <option value="samba">Samba</option>
                                        <option value="pagode">Pagode</option>
                                        <option value="axe">Ax√©</option>
                                        <option value="funk">Funk</option>
                                        <option value="gospel">Gospel</option>
                                        <option value="outros">Outros</option>
                                    </select>
                                </div>
                                
                                <div class="input-group">
                                    <label class="input-label">Ritmo</label>
                                    <select class="select-input" id="musicRitmo">
                                        <option value="calmo">Calmo</option>
                                        <option value="moderado">Moderado</option>
                                        <option value="animado">Animado</option>
                                        <option value="energetico">Energ√©tico</option>
                                    </select>
                                </div>
                                
                                <div class="input-group">
                                    <label class="input-label">Hor√°rio Ideal</label>
                                    <select class="select-input" id="musicHorario">
                                        <option value="todos">Todos</option>
                                        <option value="manha">Manh√£</option>
                                        <option value="tarde">Tarde</option>
                                        <option value="noite">Noite</option>
                                        <option value="madrugada">Madrugada</option>
                                    </select>
                                </div>
                            </div>
                            
                            <input type="file" class="file-input" id="musicasInput" accept="audio/*" multiple>
                            <button class="btn-admin btn-primary-admin" onclick="adminController.uploadFiles('musicas')" style="width: 100%;">
                                üì§ Enviar M√∫sicas
                            </button>
                        </div>
                        
                        <!-- Upload Vinhetas -->
                        <div class="upload-card">
                            <div class="upload-card-icon">üìª</div>
                            <h4 class="upload-card-title">Vinhetas</h4>
                            
                            <div class="input-group">
                                <label class="input-label">Tipo</label>
                                <select class="select-input" id="vinhetaTipo">
                                    <option value="abertura">Abertura</option>
                                    <option value="identificacao">Identifica√ß√£o</option>
                                    <option value="passagem">Passagem</option>
                                </select>
                            </div>
                            
                            <input type="file" class="file-input" id="vinhetasInput" accept="audio/*" multiple>
                            <button class="btn-admin btn-primary-admin" onclick="adminController.uploadFiles('vinhetas')" style="width: 100%;">
                                üì§ Enviar Vinhetas
                            </button>
                        </div>
                        
                        <!-- Upload Avisos -->
                        <div class="upload-card">
                            <div class="upload-card-icon">üì¢</div>
                            <h4 class="upload-card-title">Avisos</h4>
                            
                            <div class="input-group">
                                <label class="input-label">Tipo</label>
                                <select class="select-input" id="avisoTipo">
                                    <option value="promocoes">Promo√ß√µes</option>
                                    <option value="setores">Setores</option>
                                    <option value="institucional">Institucional</option>
                                </select>
                            </div>
                            
                            <input type="file" class="file-input" id="avisosInput" accept="audio/*" multiple>
                            <button class="btn-admin btn-primary-admin" onclick="adminController.uploadFiles('avisos')" style="width: 100%;">
                                üì§ Enviar Avisos
                            </button>
                        </div>
                        
                        <!-- Upload Propagandas -->
                        <div class="upload-card">
                            <div class="upload-card-icon">üì£</div>
                            <h4 class="upload-card-title">Propagandas</h4>
                            
                            <div class="input-group">
                                <label class="input-label">Tipo</label>
                                <select class="select-input" id="propagandaTipo">
                                    <option value="produtos">Produtos</option>
                                    <option value="marcas">Marcas</option>
                                </select>
                            </div>
                            
                            <input type="file" class="file-input" id="propagandasInput" accept="audio/*" multiple>
                            <button class="btn-admin btn-primary-admin" onclick="adminController.uploadFiles('propagandas')" style="width: 100%;">
                                üì§ Enviar Propagandas
                            </button>
                        </div>
                        
                        <!-- Upload Hora Certa -->
                        <div class="upload-card">
                            <div class="upload-card-icon">üïê</div>
                            <h4 class="upload-card-title">Hora Certa</h4>
                            <p style="font-size: 0.85rem; color: #6c757d; margin-bottom: 1rem;">
                                Nomeie os arquivos: 00-horas.mp3, 01-horas.mp3, etc.
                            </p>
                            
                            <input type="file" class="file-input" id="horaCertaInput" accept="audio/*" multiple>
                            <button class="btn-admin btn-primary-admin" onclick="adminController.uploadFiles('horaCerta')" style="width: 100%;">
                                üì§ Enviar Hora Certa
                            </button>
                        </div>
                    </div>
                    
                    <!-- Barra de Progresso Upload -->
                    <div id="uploadProgress" class="upload-progress" style="display: none; margin-top: 2rem;">
                        <div class="progress-info">
                            <span id="uploadStatus">Enviando...</span>
                            <span id="uploadPercent">0%</span>
                        </div>
                        <div class="progress-bar-admin">
                            <div class="progress-fill-admin" id="uploadProgressFill"></div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- SE√á√ÉO: ARQUIVOS -->
            <section id="files-section" class="content-section">
                <div class="content-header">
                    <h2 class="content-title">Gerenciar Arquivos</h2>
                    <div class="content-actions">
                        <button class="btn-admin btn-secondary-admin" id="refreshFiles">
                            üîÑ Atualizar
                        </button>
                    </div>
                </div>
                
                <div class="files-section">
                    <div class="files-grid">
                        <!-- M√∫sicas -->
                        <div class="file-category-section">
                            <div class="category-header">
                                <h3 class="category-title">üéµ M√∫sicas</h3>
                                <span class="file-count" id="countMusicas">0</span>
                            </div>
                            <div class="file-list" id="listMusicas">
                                <p style="color: #6c757d;">Carregando...</p>
                            </div>
                        </div>
                        
                        <!-- Vinhetas -->
                        <div class="file-category-section">
                            <div class="category-header">
                                <h3 class="category-title">üìª Vinhetas</h3>
                                <span class="file-count" id="countVinhetas">0</span>
                            </div>
                            <div class="file-list" id="listVinhetas">
                                <p style="color: #6c757d;">Carregando...</p>
                            </div>
                        </div>
                        
                        <!-- Avisos -->
                        <div class="file-category-section">
                            <div class="category-header">
                                <h3 class="category-title">üì¢ Avisos</h3>
                                <span class="file-count" id="countAvisos">0</span>
                            </div>
                            <div class="file-list" id="listAvisos">
                                <p style="color: #6c757d;">Carregando...</p>
                            </div>
                        </div>
                        
                        <!-- Propagandas -->
                        <div class="file-category-section">
                            <div class="category-header">
                                <h3 class="category-title">üì£ Propagandas</h3>
                                <span class="file-count" id="countPropagandas">0</span>
                            </div>
                            <div class="file-list" id="listPropagandas">
                                <p style="color: #6c757d;">Carregando...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- SE√á√ÉO: ESTAT√çSTICAS -->
            <section id="stats-section" class="content-section">
                <div class="content-header">
                    <h2 class="content-title">Estat√≠sticas Detalhadas</h2>
                    <div class="content-actions">
                        <button class="btn-admin btn-danger-admin" id="resetStats">
                            üîÑ Resetar Contadores
                        </button>
                    </div>
                </div>
                
                <div class="stats-section">
                    <h3 class="section-title">üéµ M√∫sicas Mais Tocadas</h3>
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>M√∫sica</th>
                                <th>G√™nero</th>
                                <th>Categoria</th>
                                <th>Reprodu√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="topMusicasTable">
                            <tr>
                                <td colspan="5" style="text-align: center; color: #6c757d;">
                                    Carregando estat√≠sticas...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- SE√á√ÉO: PROGRAMA√á√ÉO -->
            <section id="schedule-section" class="content-section">
                <div class="content-header">
                    <h2 class="content-title">Grade de Programa√ß√£o</h2>
                    <div class="content-actions">
                        <button class="btn-admin btn-primary-admin" id="addScheduleItem">
                            ‚ûï Adicionar Item
                        </button>
                    </div>
                </div>
                
                <div class="schedule-section">
                    <p style="color: #6c757d; margin-bottom: 2rem;">
                        Configure hor√°rios espec√≠ficos para avisos e promo√ß√µes especiais.
                    </p>
                    
                    <div class="schedule-grid" id="scheduleGrid">
                        <div class="schedule-item">
                            <div class="schedule-time">10:00</div>
                            <div class="schedule-type">Promo√ß√£o</div>
                            <div class="schedule-content">Promo√ß√£o da manh√£ - Frutas e verduras</div>
                            <div class="file-actions">
                                <button class="btn-icon btn-icon-delete">üóëÔ∏è</button>
                            </div>
                        </div>
                        
                        <div class="schedule-item">
                            <div class="schedule-time">14:00</div>
                            <div class="schedule-type">Aviso</div>
                            <div class="schedule-content">Informativo de hor√°rio de almo√ßo</div>
                            <div class="file-actions">
                                <button class="btn-icon btn-icon-delete">üóëÔ∏è</button>
                            </div>
                        </div>
                        
                        <div class="schedule-item">
                            <div class="schedule-time">18:00</div>
                            <div class="schedule-type">Promo√ß√£o</div>
                            <div class="schedule-content">Promo√ß√£o da noite - Padaria</div>
                            <div class="file-actions">
                                <button class="btn-icon btn-icon-delete">üóëÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- SE√á√ÉO: CONFIGURA√á√ïES -->
            <section id="config-section" class="content-section">
                <div class="content-header">
                    <h2 class="content-title">Configura√ß√µes</h2>
                    <div class="content-actions">
                        <button class="btn-admin btn-primary-admin" id="saveConfig">
                            üíæ Salvar
                        </button>
                    </div>
                </div>
                
                <div class="upload-section">
                    <h3 class="section-title">‚öôÔ∏è Configura√ß√µes de Rota√ß√£o</h3>
                    
                    <div class="metadata-inputs" style="max-width: 600px;">
                        <div class="input-group">
                            <label class="input-label">Intervalo M√≠nimo de Repeti√ß√£o (minutos)</label>
                            <input type="number" class="text-input" id="configIntervalo" value="45" min="10" max="120">
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">
                                <input type="checkbox" id="configBalancearGeneros" checked> 
                                Balancear G√™neros Musicais
                            </label>
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">
                                <input type="checkbox" id="configBalancearRitmos" checked> 
                                Alternar Ritmos (Calmo/Animado)
                            </label>
                        </div>
                        
                        <div class="input-group">
                            <label class="input-label">
                                <input type="checkbox" id="configConsiderarHorario" checked> 
                                Considerar Hor√°rio do Dia
                            </label>
                        </div>
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 2rem;">üéµ √Ålbum Ativo</h3>
                    <div class="input-group" style="max-width: 400px;">
                        <label class="input-label">Selecione o √°lbum para tocar exclusivamente</label>
                        <select class="select-input" id="configAlbumAtivo">
                            <option value="geral">Playlist Geral (Todas)</option>
                            <option value="natal">Natal</option>
                            <option value="pascoa">P√°scoa</option>
                            <option value="saojoao">S√£o Jo√£o</option>
                            <option value="carnaval">Carnaval</option>
                        </select>
                    </div>
                </div>
            </section>
            
        </main>
    </div>
    
    <!-- Modal de Confirma√ß√£o -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <h3 id="confirmTitle">Confirmar A√ß√£o</h3>
            <p id="confirmMessage">Tem certeza que deseja continuar?</p>
            <div class="content-actions">
                <button class="btn-admin btn-danger-admin" id="confirmYes">Sim</button>
                <button class="btn-admin btn-secondary-admin" id="confirmNo">Cancelar</button>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div id="toastContainer"></div>
    
    <!-- Scripts -->
    <script type="module" src="js/config.js"></script>
    <script type="module" src="js/supabase-service.js"></script>
    <script type="module" src="js/cloudinary-service.js"></script>
    <script type="module" src="js/radio-engine.js"></script>
    <script type="module" src="js/admin.js"></script>
    
    <style>
        /* Estilos adicionais inline */
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            max-width: 500px;
            width: 90%;
        }
        
        .upload-progress {
            background: #f5f5f5;
            padding: 1.5rem;
            border-radius: 0.75rem;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .progress-bar-admin {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill-admin {
            height: 100%;
            background: linear-gradient(135deg, #1a7a5e, #2ea57d);
            transition: width 0.3s ease;
            width: 0%;
        }
    </style>
</body>
</html>
